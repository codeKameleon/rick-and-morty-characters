{"mappings":"AACA,IAAIA,EAAaC,KAAKC,MAAMC,aAAaC,QAAQ,gBAAkB,GAGnE,MAAMC,EAAYC,SAASC,cAAc,cACnCC,EAAyBF,SAASC,cAAc,yBAChDE,EAAuBH,SAASC,cAAc,eAC9CG,EAAgBJ,SAASC,cAAc,kBAG7C,IACII,EAAc,EACdC,GAAuB,EAG3B,MAAMC,EAAaC,UACfH,IAEA,MAAMI,EAAG,kDAAsDJ,IACzDK,QAAiBC,MAAMF,GAEvBG,SADaF,EAASG,QACAC,QAE5B,GAAwB,GAArBpB,EAAWqB,QAAeT,EAAsB,CAC/C,IAAI,IAAIU,EAAI,EAAGA,EAAIJ,EAAeG,OAAQC,IACtCtB,EAAWuB,KAAKL,EAAeI,IAGnCnB,aAAaqB,QAAQ,aAAcvB,KAAKwB,UAAUzB,IAClD0B,EAAoB1B,KAItB2B,EAAgB,KAClB,MAAMC,EAAmB5B,EAAW6B,QAAOC,GAAaA,EAAUC,KAAKC,cAAcC,SAAS5B,EAAU6B,MAAMF,iBAC9G7B,aAAaqB,QAAQ,aAAcvB,KAAKwB,UAAUG,IAClDF,EAAoBE,IAGlBF,EAAuBS,IACzB1B,EAAqB2B,UAAY,GAEjC,IAAI,MAAMN,KAAaK,EAAY,CAC/B,MAAME,EAAkB/B,SAASgC,cAAc,OAC/CD,EAAeE,UAAa,iBAE5B,MAAMC,EAAkBlC,SAASgC,cAAc,QAC/CE,EAAeD,UAAY,iBAC3BC,EAAeC,YAAcX,EAAUC,KAEvC,MAAMW,EAAqBpC,SAASgC,cAAc,QAClDI,EAAkBH,UAAY,oBAC9BG,EAAkBD,YAAcX,EAAUa,QAE1CN,EAAeO,YAAYJ,GAC3BH,EAAeO,YAAYF,GAC3BjC,EAAqBmC,YAAYP,KA4BzChC,EAAUwC,iBAAiB,SAAO,KAC9BlB,IAzBoB,MACpB,MAAMmB,EAAezC,EAAU6B,MACzBa,EAAc/C,EAAW6B,QAAOC,GAAaA,EAAUC,KAAKC,cAAcC,SAASa,EAAad,iBAEtG,IAAI,MAAMgB,KAAcD,EAAa,CACjC,MAAME,EAAsB3C,SAASgC,cAAc,MAEnDW,EAAoBR,YAAcO,EAAWjB,KAC7CkB,EAAoBV,UAAY,sBAChCU,EAAoBJ,iBAAiB,SAASK,IAC1C7C,EAAU6B,MAAQgB,EAAEC,OAAOV,YAC3Bd,IACAnB,EAAuB4C,UAAUC,OAAO,wBAI5C7C,EAAuBoC,YAAYK,GAGvCzC,EAAuB4C,UAAUE,IAAI,sBAOrCC,MAGJ7C,EAAcmC,iBAAiB,SAAO,KAClCjC,GAAuB,EACvBC,OAIJP,SAASuC,iBAAiB,SAASK,IACF7C,EAAUmD,SAASN,EAAEC,SAG9C3C,EAAuB4C,UAAUC,OAAO,wBAKhDhD,EAAU6B,MAAQ,GAClBrB,IACAa,EAAoB1B","sources":["src/js/index.js"],"sourcesContent":["/*========= LocalStorage ========= */\nlet characters = JSON.parse(localStorage.getItem('characters')) || []\n\n/*========= DOM elements ========= */\nconst searchbar = document.querySelector('.searchbar')\nconst autocomplete_container = document.querySelector('.autocomplete-results')\nconst characters_container = document.querySelector('.characters')\nconst load_more_btn = document.querySelector('.load-more-btn')\n\n/*========= Variables ========= */\nlet oldArray;\nlet pageNumber  = 0;\nlet isLoadingMoreResults = false;\n\n/*========= Functions ========= */\nconst getCharacters =  async () => {\n    pageNumber++\n\n    const url  = `https://rickandmortyapi.com/api/character?page=${pageNumber}`\n    const response = await fetch(url)\n    const data = await response.json()\n    const all_characters = data.results\n\n    if(characters.length == 0 || isLoadingMoreResults) {\n        for(let i = 0; i < all_characters.length; i++) {\n            characters.push(all_characters[i])\n        }\n    \n        localStorage.setItem('characters', JSON.stringify(characters))\n        renderCharacterCard(characters)\n    }\n}\n\nconst filterCharacters = () => {\n    const filtered_results = characters.filter(character => character.name.toLowerCase().includes(searchbar.value.toLowerCase()))\n    localStorage.setItem('characters', JSON.stringify(filtered_results))\n    renderCharacterCard(filtered_results)\n}\n\nconst renderCharacterCard  = characters => {\n    characters_container.innerHTML = ''\n\n    for(const character of characters) {\n        const character_card =  document.createElement('div')\n        character_card.className =  'character-card'\n        \n        const character_name =  document.createElement('span')\n        character_name.className = 'character-name'\n        character_name.textContent = character.name\n\n        const character_species =  document.createElement('span')\n        character_species.className = 'character-species'\n        character_species.textContent = character.species\n\n        character_card.appendChild(character_name)\n        character_card.appendChild(character_species)\n        characters_container.appendChild(character_card)\n    }\n}\n\nconst searchAutoComplete = () => {\n    const search_value = searchbar.value\n    const suggestions = characters.filter(character => character.name.toLowerCase().includes(search_value.toLowerCase()))\n\n    for(const suggestion of suggestions) {\n        const autocomplete_result = document.createElement('li')\n\n        autocomplete_result.textContent = suggestion.name\n        autocomplete_result.className = 'autocomplete-result'\n        autocomplete_result.addEventListener('click', e => {\n            searchbar.value = e.target.textContent\n            filterCharacters()\n            autocomplete_container.classList.remove('show-autocomplete')\n\n        })\n\n        autocomplete_container.appendChild(autocomplete_result)\n    }\n\n    autocomplete_container.classList.add('show-autocomplete')\n}\n\n/*========= Event Listeners ========= */\n\nsearchbar.addEventListener('input', () => {\n    filterCharacters()\n    searchAutoComplete()\n})\n\nload_more_btn.addEventListener('click', () => {\n    isLoadingMoreResults = true\n    getCharacters()\n})\n\n// Click outside input search closing the aucomplete results\ndocument.addEventListener('click', e => {\n    let isClickInsideSearchbar = searchbar.contains(e.target)\n\n    if(!isClickInsideSearchbar) {\n        autocomplete_container.classList.remove('show-autocomplete')\n    }\n})\n\n/*========= Functions Calls ========= */\nsearchbar.value = ''\ngetCharacters()\nrenderCharacterCard(characters)"],"names":["$85a5f86b715fe7db$var$characters","JSON","parse","localStorage","getItem","$85a5f86b715fe7db$var$searchbar","document","querySelector","$85a5f86b715fe7db$var$autocomplete_container","$85a5f86b715fe7db$var$characters_container","$85a5f86b715fe7db$var$load_more_btn","$85a5f86b715fe7db$var$pageNumber","$85a5f86b715fe7db$var$isLoadingMoreResults","$85a5f86b715fe7db$var$getCharacters","async","url","response","fetch","all_characters","json","results","length","i","push","setItem","stringify","$85a5f86b715fe7db$var$renderCharacterCard","$85a5f86b715fe7db$var$filterCharacters","filtered_results","filter","character","name","toLowerCase","includes","value","characters","innerHTML","character_card","createElement","className","character_name","textContent","character_species","species","appendChild","addEventListener","search_value","suggestions","suggestion","autocomplete_result","e","target","classList","remove","add","$85a5f86b715fe7db$var$searchAutoComplete","contains"],"version":3,"file":"index.bca01e64.js.map"}