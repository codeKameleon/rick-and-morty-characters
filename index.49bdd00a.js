let e=JSON.parse(localStorage.getItem("characters"))||[];const t=document.querySelector(".searchbar"),a=document.querySelector(".autocomplete-results"),n=document.querySelector(".characters"),c=document.querySelector(".load-more-btn"),s=document.querySelector(".no-results");let o,l=0,r=!1;const d=async()=>{l++;const t=`https://rickandmortyapi.com/api/character?page=${l}`,a=await fetch(t),n=(await a.json()).results;if(0==e.length||r){for(let t=0;t<n.length;t++)e.push(n[t]);localStorage.setItem("characters",JSON.stringify(e)),m(e)}},i=()=>{o=e.filter((e=>e.name.toLowerCase().includes(t.value.toLowerCase()))),m(o)},m=e=>{n.innerHTML="";for(const t of e){const e=document.createElement("div");e.className="character-card";const a=document.createElement("img");a.className="character-image",a.src=t.image;const c=document.createElement("div");c.className="character-details";const s=document.createElement("span");s.className="character-name",s.textContent=t.name;const o=document.createElement("span");o.className="character-species",o.textContent=t.species;const l=document.createElement("div");l.className="character-location-wrapper";const r=document.createElement("span");r.className="character-location-label",r.textContent="Last known location : ";const d=document.createElement("span");d.textContent=t.location.name;const i=document.createElement("div");i.className="character-episode-wrapper";const m=document.createElement("span");m.className="character-episode-label",m.textContent="First seen in : ";const p=document.createElement("span");(async()=>{const e=t.episode[0],a=await fetch(e),n=await a.json(),c=[n.name,n.episode];return p.textContent=`${c[0]}  (${c[1]})`,c})(),i.appendChild(m),i.appendChild(p),l.appendChild(r),l.appendChild(d),c.appendChild(s),c.appendChild(o),c.appendChild(l),c.appendChild(i),e.appendChild(a),e.appendChild(c),n.appendChild(e)}};t.addEventListener("input",(()=>{i(),(()=>{const n=t.value,c=e.filter((e=>e.name.toLowerCase().includes(n.toLowerCase())));a.innerHTML="";for(const e of c){const n=document.createElement("li");n.textContent=e.name,n.className="autocomplete-result",n.addEventListener("click",(e=>{t.value=e.target.textContent,i(),a.classList.remove("show-autocomplete")})),a.appendChild(n)}a.classList.add("show-autocomplete")})(),0===o.length?(c.style.display="none",s.style.display="block"):(c.style.display="block",s.style.display="none")})),c.addEventListener("click",(()=>{r=!0,d()})),document.addEventListener("click",(e=>{t.contains(e.target)||a.classList.remove("show-autocomplete")})),t.value="",d(),m(e);
//# sourceMappingURL=index.49bdd00a.js.map
